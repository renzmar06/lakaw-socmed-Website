{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Desktop/TIKTOK/reel-boost-website/src/app/store/api/getBlockedList.tsx"],"sourcesContent":["import axios from \"axios\";\r\nimport Cookies from \"js-cookie\";\r\nimport { BlockedList } from \"@/app/types/ResTypes\";\r\n\r\ninterface FetchBlockedUsersParams {\r\n  pageParam?: number;\r\n}\r\n\r\nexport const fetchBlockedUsers = async ({\r\n  pageParam = 1,\r\n}: FetchBlockedUsersParams): Promise<BlockedList> => {\r\n  const token = Cookies.get(\"Reelboost_auth_token\");\r\n\r\n  const { data } = await axios.post<BlockedList>(\r\n    `${process.env.NEXT_PUBLIC_API_URL}/block/block-list`,\r\n    { page: pageParam }, // ✅ send page in body\r\n    {\r\n      headers: {\r\n        Authorization: `Bearer ${token}`,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n    }\r\n  );\r\n\r\n  return data;\r\n};\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAOO,MAAM,oBAAoB,OAAO,EACtC,YAAY,CAAC,EACW;IACxB,MAAM,QAAQ,iNAAO,CAAC,GAAG,CAAC;IAE1B,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,iMAAK,CAAC,IAAI,CAC/B,iEAAmC,iBAAiB,CAAC,EACrD;QAAE,MAAM;IAAU,GAClB;QACE,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;YAChC,gBAAgB;QAClB;IACF;IAGF,OAAO;AACT","debugId":null}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Desktop/TIKTOK/reel-boost-website/src/app/setting/blocked-list/BlockedList.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useRef, useEffect } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { useInfiniteQuery, useQueryClient } from \"@tanstack/react-query\";\r\nimport { fetchBlockedUsers } from \"@/app/store/api/getBlockedList\";\r\nimport { BlockedList, BlockUnblockResponse } from \"@/app/types/ResTypes\";\r\nimport useApiPost from \"@/app/hooks/postData\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport default function BlockedListPage() {\r\n  const queryClient = useQueryClient();\r\n\r\n  const { data, fetchNextPage, hasNextPage, isFetchingNextPage } =\r\n    useInfiniteQuery<BlockedList>({\r\n      queryKey: [\"blockedUsers\"],\r\n      queryFn: ({ pageParam }) =>\r\n        fetchBlockedUsers({ pageParam: pageParam as number }),\r\n      getNextPageParam: (lastPage) => {\r\n        const { current_page, total_pages } = lastPage.data.Pagination;\r\n        return current_page < total_pages ? current_page + 1 : undefined;\r\n      },\r\n      initialPageParam: 1,\r\n    });\r\n\r\n  const observerRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const { postData } = useApiPost();\r\n  const handleBlockUnblock = async (userId: number) => {\r\n    try {\r\n      const response: BlockUnblockResponse = await postData(\r\n        \"/block/block-unblock\",\r\n        { user_id: userId }\r\n      );\r\n      if (response.status) {\r\n        toast.success(response.message);\r\n        queryClient.invalidateQueries({ queryKey: [\"blockedUsers\"] }); // ✅ refresh list\r\n      } else {\r\n        toast.error(response.message);\r\n      }\r\n    } catch {\r\n      toast.error(\"Something went wrong\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!observerRef.current || !hasNextPage) return;\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        if (entries[0].isIntersecting) fetchNextPage();\r\n      },\r\n      { threshold: 1 }\r\n    );\r\n    observer.observe(observerRef.current);\r\n    return () => observer.disconnect();\r\n  }, [hasNextPage, fetchNextPage]);\r\n\r\n  const blockedUsers = data?.pages.flatMap((p) => p.data.Records) ?? [];\r\n  return (\r\n    <>\r\n        \r\n        <h1 className=\"text-lg font-bold text-dark sm:block hidden p-6\">Blocked List</h1>\r\n\r\n\r\n      {blockedUsers.length > 0 ? (\r\n        <>\r\n          {/* Search Bar */}\r\n          {/* <div className=\"flex flex-col mt-4 px-9\">\r\n            <div className=\"relative\">\r\n              <div className=\"absolute left-2 top-1/2 transform -translate-y-1/2 p-2\">\r\n                <Image\r\n                  src=\"/home/search_icon.png\"\r\n                  alt=\"Search\"\r\n                  width={20}\r\n                  height={20}\r\n                />\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                className=\"border border-dark bg-dark/[0.04] text-dark rounded-2xl w-full py-2 pl-10 placeholder:text-sm\"\r\n                placeholder=\"Search User\"\r\n              />\r\n            </div>\r\n          </div> */}\r\n\r\n          {/* Users List */}\r\n          {blockedUsers.map((record) => {\r\n            const user = record.blocked;\r\n            return (\r\n              <div\r\n                key={record.block_id}\r\n                className=\"flex justify-between border-b items-center py-2 sm:mx-12 mt-4\"\r\n              >\r\n                <div className=\"flex gap-3\">\r\n                  <Image\r\n                    src={user.profile_pic}\r\n                    alt={user.first_name}\r\n                    className=\"h-12 w-12 object-cover rounded-full\"\r\n                    width={48}\r\n                    height={48}\r\n                  />\r\n                  <div>\r\n                    <h2 className=\"font-semibold text-sm text-dark\">\r\n                      {user.first_name}\r\n                    </h2>\r\n                    <p className=\"text-[#747474] text-xs\">{user.user_name}</p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={() => handleBlockUnblock(user.user_id)}\r\n                  className=\"rounded-xl text-xs h-fit px-6 py-1.5 cursor-pointer border border-main-green text-dark\"\r\n                >\r\n                  Unblock\r\n                </button>\r\n              </div>\r\n            );\r\n          })}\r\n\r\n          {/* Infinite Scroll Loader */}\r\n          <div ref={observerRef} className=\"py-4 text-center\">\r\n            {isFetchingNextPage && <span>Loading more...</span>}\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <div className=\"flex flex-col gap-2 justify-center items-center py-52\">\r\n          <Image\r\n            src=\"/Setting/NoBlocks.png\"\r\n            alt=\"No blocks\"\r\n            width={80}\r\n            height={80}\r\n          />\r\n          <span className=\"text-dark text-sm\">No Blocked Users</span>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AAPA;;;;;;;;AASe,SAAS;IACtB,MAAM,cAAc,IAAA,yPAAc;IAElC,MAAM,EAAE,IAAI,EAAE,aAAa,EAAE,WAAW,EAAE,kBAAkB,EAAE,GAC5D,IAAA,wPAAgB,EAAc;QAC5B,UAAU;YAAC;SAAe;QAC1B,SAAS,CAAC,EAAE,SAAS,EAAE,GACrB,IAAA,mNAAiB,EAAC;gBAAE,WAAW;YAAoB;QACrD,kBAAkB,CAAC;YACjB,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,GAAG,SAAS,IAAI,CAAC,UAAU;YAC9D,OAAO,eAAe,cAAc,eAAe,IAAI;QACzD;QACA,kBAAkB;IACpB;IAEF,MAAM,cAAc,IAAA,gQAAM,EAAwB;IAElD,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,4LAAU;IAC/B,MAAM,qBAAqB,OAAO;QAChC,IAAI;YACF,MAAM,WAAiC,MAAM,SAC3C,wBACA;gBAAE,SAAS;YAAO;YAEpB,IAAI,SAAS,MAAM,EAAE;gBACnB,6MAAK,CAAC,OAAO,CAAC,SAAS,OAAO;gBAC9B,YAAY,iBAAiB,CAAC;oBAAE,UAAU;wBAAC;qBAAe;gBAAC,IAAI,iBAAiB;YAClF,OAAO;gBACL,6MAAK,CAAC,KAAK,CAAC,SAAS,OAAO;YAC9B;QACF,EAAE,OAAM;YACN,6MAAK,CAAC,KAAK,CAAC;QACd;IACF;IAEA,IAAA,mQAAS,EAAC;QACR,IAAI,CAAC,YAAY,OAAO,IAAI,CAAC,aAAa;QAC1C,MAAM,WAAW,IAAI,qBACnB,CAAC;YACC,IAAI,OAAO,CAAC,EAAE,CAAC,cAAc,EAAE;QACjC,GACA;YAAE,WAAW;QAAE;QAEjB,SAAS,OAAO,CAAC,YAAY,OAAO;QACpC,OAAO,IAAM,SAAS,UAAU;IAClC,GAAG;QAAC;QAAa;KAAc;IAE/B,MAAM,eAAe,MAAM,MAAM,QAAQ,CAAC,IAAM,EAAE,IAAI,CAAC,OAAO,KAAK,EAAE;IACrE,qBACE;;0BAEI,+RAAC;gBAAG,WAAU;0BAAkD;;;;;;YAGjE,aAAa,MAAM,GAAG,kBACrB;;oBAqBG,aAAa,GAAG,CAAC,CAAC;wBACjB,MAAM,OAAO,OAAO,OAAO;wBAC3B,qBACE,+RAAC;4BAEC,WAAU;;8CAEV,+RAAC;oCAAI,WAAU;;sDACb,+RAAC,yLAAK;4CACJ,KAAK,KAAK,WAAW;4CACrB,KAAK,KAAK,UAAU;4CACpB,WAAU;4CACV,OAAO;4CACP,QAAQ;;;;;;sDAEV,+RAAC;;8DACC,+RAAC;oDAAG,WAAU;8DACX,KAAK,UAAU;;;;;;8DAElB,+RAAC;oDAAE,WAAU;8DAA0B,KAAK,SAAS;;;;;;;;;;;;;;;;;;8CAGzD,+RAAC;oCACC,SAAS,IAAM,mBAAmB,KAAK,OAAO;oCAC9C,WAAU;8CACX;;;;;;;2BArBI,OAAO,QAAQ;;;;;oBA0B1B;kCAGA,+RAAC;wBAAI,KAAK;wBAAa,WAAU;kCAC9B,oCAAsB,+RAAC;sCAAK;;;;;;;;;;;;6CAIjC,+RAAC;gBAAI,WAAU;;kCACb,+RAAC,yLAAK;wBACJ,KAAI;wBACJ,KAAI;wBACJ,OAAO;wBACP,QAAQ;;;;;;kCAEV,+RAAC;wBAAK,WAAU;kCAAoB;;;;;;;;;;;;;;AAK9C","debugId":null}}]
}