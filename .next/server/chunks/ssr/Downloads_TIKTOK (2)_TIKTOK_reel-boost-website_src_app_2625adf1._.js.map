{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Downloads/TIKTOK%20%282%29/TIKTOK/reel-boost-website/src/app/message/UserItem.tsx"],"sourcesContent":["import Image from \"next/image\";\r\nimport { PeerUserData, Messages } from \"../types/ChatListType\";\r\nimport { useAppSelector } from \"../utils/hooks\";\r\nimport Cookies from \"js-cookie\";\r\n\r\ninterface UserItemProps {\r\n  user: PeerUserData;\r\n  chatId: number;\r\n  latestMessage?: Messages;\r\n  unseenCount?: number; // âœ… New prop for unseen message count\r\n  onClick?: () => void;\r\n}\r\n\r\nconst UserItem: React.FC<UserItemProps> = ({\r\n  user,\r\n  chatId,\r\n  latestMessage,\r\n  unseenCount,\r\n  onClick,\r\n}) => {\r\n  // âœ… flat array now\r\n  const onlineUsers = useAppSelector((state) => state.OnlineUserList);\r\n\r\n  const isOnline =\r\n    user && Array.isArray(onlineUsers)\r\n      ? onlineUsers.some((u) => u.user_id === user.user_id)\r\n      : false;\r\n  const isTyping = useAppSelector((state) => state.SendMessageData.typing);\r\n  const chat_id = useAppSelector((state) => state.SendMessageData.chat_id);\r\n\r\n  \r\n  return (\r\n    <>\r\n      <div\r\n        onClick={onClick}\r\n        className=\"flex xl:gap-4 lg:gap-2 md:gap-0 gap-4 py-4 border-b px-3 border-[#EFEFEF] cursor-pointer\"\r\n      >\r\n        <div className=\"relative flex-shrink-0 md:px-3 lg:px-0\">\r\n          <Image\r\n            src={user.profile_pic}\r\n            alt=\"profile\"\r\n            width={48}\r\n            height={48}\r\n            className=\"w-[44px] h-[44px] rounded-full object-cover\"\r\n          />\r\n\r\n          {isOnline && (\r\n            <>\r\n              {isOnline && (\r\n                <div className=\"w-3 h-3 rounded-full bg-green-600 bottom-0 right-0 absolute\"></div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"flex flex-col flex-grow overflow-hidden justify-center\">\r\n          <div className=\"flex justify-between items-center w-full\">\r\n            <h2 className=\"lg:text-sm text-xs font-semibold text-dark font-gilroy_semibold truncate\">\r\n              {user.full_name}\r\n            </h2>\r\n\r\n            {/* time and read unread tick */}\r\n            <div className=\"flex flex-col items-center\">\r\n              {/* time */}\r\n              <p className=\"text-[10px] font-poppins text-[#747474]\">\r\n                {latestMessage?.updatedAt\r\n                  ? new Date(latestMessage.updatedAt).toLocaleTimeString([], {\r\n                      hour: \"2-digit\",\r\n                      minute: \"2-digit\",\r\n                    })\r\n                  : \"\"}\r\n              </p>\r\n              {/* tick */}\r\n            </div>\r\n          </div>\r\n\r\n          {/* unseen message count  */}\r\n          {/* {latestMessage?.} */}\r\n          <div className=\"flex justify-between items-center w-full\">\r\n            {isTyping && chatId == chat_id ? (\r\n              <>\r\n                <p className=\"text-main-green text-xs max-w-3xs font-gilroy_md line-clamp-1 truncate\">\r\n                  typing...\r\n                </p>\r\n              </>\r\n            ) : (\r\n              <>\r\n                {latestMessage?.message_type === \"text\" ? (\r\n                  <>\r\n                    <p className=\"text-[#747474] text-xs max-w-3xs font-gilroy_md line-clamp-1 truncate\">\r\n                      {latestMessage?.message_content}\r\n                    </p>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <p className=\"text-[#747474] text-xs font-gilroy_md line-clamp-1 truncate\">\r\n                      {latestMessage?.message_type}\r\n                    </p>\r\n                  </>\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {unseenCount && unseenCount > 0 ? (\r\n              <div className=\"bg-main-green flex items-center justify-center p-1 w-4.5 h-4.5 rounded-full\">\r\n                <span className=\"text-primary text-[8px] font-medium\">\r\n                  {unseenCount}\r\n                </span>\r\n              </div>\r\n            ) : (\r\n              <>\r\n               \r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserItem;\r\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAWA,MAAM,WAAoC,CAAC,EACzC,IAAI,EACJ,MAAM,EACN,aAAa,EACb,WAAW,EACX,OAAO,EACR;IACC,mBAAmB;IACnB,MAAM,cAAc,IAAA,qNAAc,EAAC,CAAC,QAAU,MAAM,cAAc;IAElE,MAAM,WACJ,QAAQ,MAAM,OAAO,CAAC,eAClB,YAAY,IAAI,CAAC,CAAC,IAAM,EAAE,OAAO,KAAK,KAAK,OAAO,IAClD;IACN,MAAM,WAAW,IAAA,qNAAc,EAAC,CAAC,QAAU,MAAM,eAAe,CAAC,MAAM;IACvE,MAAM,UAAU,IAAA,qNAAc,EAAC,CAAC,QAAU,MAAM,eAAe,CAAC,OAAO;IAGvE,qBACE;kBACE,cAAA,oTAAC;YACC,SAAS;YACT,WAAU;;8BAEV,oTAAC;oBAAI,WAAU;;sCACb,oTAAC,8MAAK;4BACJ,KAAK,KAAK,WAAW;4BACrB,KAAI;4BACJ,OAAO;4BACP,QAAQ;4BACR,WAAU;;;;;;wBAGX,0BACC;sCACG,0BACC,oTAAC;gCAAI,WAAU;;;;;;;;;;;;;8BAMvB,oTAAC;oBAAI,WAAU;;sCACb,oTAAC;4BAAI,WAAU;;8CACb,oTAAC;oCAAG,WAAU;8CACX,KAAK,SAAS;;;;;;8CAIjB,oTAAC;oCAAI,WAAU;8CAEb,cAAA,oTAAC;wCAAE,WAAU;kDACV,eAAe,YACZ,IAAI,KAAK,cAAc,SAAS,EAAE,kBAAkB,CAAC,EAAE,EAAE;4CACvD,MAAM;4CACN,QAAQ;wCACV,KACA;;;;;;;;;;;;;;;;;sCAQV,oTAAC;4BAAI,WAAU;;gCACZ,YAAY,UAAU,wBACrB;8CACE,cAAA,oTAAC;wCAAE,WAAU;kDAAyE;;;;;;kEAKxF;8CACG,eAAe,iBAAiB,uBAC/B;kDACE,cAAA,oTAAC;4CAAE,WAAU;sDACV,eAAe;;;;;;sEAIpB;kDACE,cAAA,oTAAC;4CAAE,WAAU;sDACV,eAAe;;;;;;;;gCAOzB,eAAe,cAAc,kBAC5B,oTAAC;oCAAI,WAAU;8CACb,cAAA,oTAAC;wCAAK,WAAU;kDACb;;;;;;;;;;6FAIL;;;;;;;;;;;;;;;;;;;;AASd;uCAEe","debugId":null}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Downloads/TIKTOK%20%282%29/TIKTOK/reel-boost-website/src/app/message/AllChatUsers.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAppSelector, useAppDispatch } from \"../utils/hooks\";\r\nimport UserItem from \"./UserItem\";\r\nimport { ChatListRes, Messages, Record } from \"../types/ChatListType\";\r\nimport { updateCurrentConversation } from \"../store/Slice/CurrentConversationSlice\";\r\nimport { socketInstance } from \"../socket/socket\";\r\nimport { resetPagination } from \"../store/Slice/MessageOptionsSlice\";\r\nimport { clearMessageList } from \"../store/Slice/MessageListSlice\";\r\nimport { updateChatList } from \"../store/Slice/ChatListSlice\";\r\nimport { setChatId } from \"../store/Slice/setChatIdMessageLoading\";\r\n\r\nfunction AllChatUsers({ onUserClick }: { onUserClick?: () => void }) {\r\n  const router = useRouter();\r\n  const dispatch = useAppDispatch();\r\n  const chatList = useAppSelector((state) => state.chatList);\r\n  const currentChatId = useAppSelector((state) => state.CurrentConversation);\r\n\r\n  const handleChatClick = (record: Record) => {\r\n    if (record.chat_id === currentChatId.chat_id) return; // ðŸš« Don't re-select same chat\r\n\r\n    const chat = chatList.find((c) =>\r\n      c.Records.some((r) => r.chat_id === record.chat_id)\r\n    );\r\n    if (!chat) return;\r\n\r\n    const peerUser = chat.PeerUserData;\r\n\r\n    dispatch(resetPagination());\r\n    dispatch(clearMessageList());\r\n\r\n    dispatch(\r\n      updateCurrentConversation({\r\n        ...record,\r\n        PeerUserData: peerUser,\r\n      })\r\n    );\r\n\r\n    dispatch(setChatId(record.chat_id));\r\n  };\r\n\r\n  useEffect(() => {\r\n    const socket = socketInstance();\r\n\r\n    const handleChatListUpdate = (ChatList: ChatListRes) => {\r\n      dispatch(updateChatList(ChatList.Chats));\r\n    };\r\n\r\n    socket.on(\"chat_list\", handleChatListUpdate);\r\n\r\n    // Fetch immediately on mount\r\n    socket.emit(\"chat_list\");\r\n\r\n    return () => {\r\n      socket.off(\"chat_list\", handleChatListUpdate);\r\n    };\r\n  }, [dispatch]);\r\n\r\n  // Auto-select the first chat if not a new conversation and no current chat selected\r\n  useEffect(() => {\r\n    if (\r\n      chatList.length > 0 &&\r\n      !currentChatId.chat_id &&\r\n      !currentChatId?.PeerUserData\r\n    ) {\r\n      const firstChat = chatList[0];\r\n      const firstRecord = firstChat?.Records?.[0];\r\n      if (firstRecord) handleChatClick(firstRecord);\r\n    }\r\n  }, [chatList, currentChatId]);\r\n\r\n  // âœ… include `currentChatId.chat_id` in deps\r\n\r\n  return (\r\n    <div className=\"flex flex-col sticky top-0 bg-primary xl:pt-16\">\r\n      {/* Header */}\r\n      <div className=\"flex gap-2 sm:p-3 px-3 py-2 flex-shrink-0\">\r\n        <button onClick={() => router.push(\"/\")} className=\"sm:hidden\" />\r\n        <h2 className=\"font-gilroy_semibold text-lg text-dark font-semibold\">\r\n          Chats\r\n        </h2>\r\n      </div>\r\n\r\n      {/* Search bar */}\r\n      <div className=\"relative sm:p-3 px-2 flex-shrink-0\">\r\n        <div className=\"absolute top-1/2 left-5 transform -translate-y-1/2 p-2 flex items-center\">\r\n          <Image\r\n            src=\"/SidebarIcons/search.png\"\r\n            alt=\"Search\"\r\n            className=\"w-5 h-5\"\r\n            width={10}\r\n            height={10}\r\n          />\r\n        </div>\r\n        <input\r\n          type=\"text\"\r\n          className=\"border border-[#EEEEEE] bg-dark/[0.02] rounded-lg w-full py-2 my-1 pl-12 placeholder:text-sm text-dark placeholder:text-[#A4A4A4] focus:outline-none focus:ring-1 focus:ring-gray-600\"\r\n          placeholder=\"Search for a User\"\r\n        />\r\n      </div>\r\n      {/* Chat List */}\r\n      <div className=\"overflow-y-auto flex-grow\">\r\n        {chatList.length > 0 ? (\r\n          chatList.map((chat, index) => {\r\n            const user = chat.PeerUserData;\r\n            const record = chat.Records[0]; // Or logic for latest/first record\r\n            const latestMessage: Messages | undefined =\r\n              record?.Messages?.[record.Messages.length - 1];\r\n\r\n            return (\r\n              <>\r\n                <UserItem\r\n                  key={user.user_id + \"-\" + index}\r\n                  user={user}\r\n                  latestMessage={latestMessage}\r\n                  chatId={record.chat_id}\r\n                  unseenCount={record.unseen_count} // ðŸ‘ˆ pass unseen count here\r\n                  onClick={() => {\r\n                    if (record) handleChatClick(record);\r\n                    if (onUserClick) onUserClick(); // trigger toggle on mobile\r\n                  }}\r\n                />\r\n              </>\r\n            );\r\n          })\r\n        ) : (\r\n          <>\r\n            <div className=\"flex flex-col justify-center min-h-200 items-center place-items-center\">\r\n              {/* <Image\r\n                src=\"/home/Empty.png\"\r\n                className=\"w-[50px] h-[50px]\"\r\n                alt=\"no post\"\r\n                width={400}\r\n                height={400}\r\n              /> */}\r\n\r\n              <p className=\"text-dark text-center text-sm\">No Chats Found.</p>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AllChatUsers;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAZA;;;;;;;;;;;;;AAcA,SAAS,aAAa,EAAE,WAAW,EAAgC;IACjE,MAAM,SAAS,IAAA,qNAAS;IACxB,MAAM,WAAW,IAAA,qNAAc;IAC/B,MAAM,WAAW,IAAA,qNAAc,EAAC,CAAC,QAAU,MAAM,QAAQ;IACzD,MAAM,gBAAgB,IAAA,qNAAc,EAAC,CAAC,QAAU,MAAM,mBAAmB;IAEzE,MAAM,kBAAkB,CAAC;QACvB,IAAI,OAAO,OAAO,KAAK,cAAc,OAAO,EAAE,QAAQ,+BAA+B;QAErF,MAAM,OAAO,SAAS,IAAI,CAAC,CAAC,IAC1B,EAAE,OAAO,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,OAAO,KAAK,OAAO,OAAO;QAEpD,IAAI,CAAC,MAAM;QAEX,MAAM,WAAW,KAAK,YAAY;QAElC,SAAS,IAAA,6OAAe;QACxB,SAAS,IAAA,2OAAgB;QAEzB,SACE,IAAA,4PAAyB,EAAC;YACxB,GAAG,MAAM;YACT,cAAc;QAChB;QAGF,SAAS,IAAA,2OAAS,EAAC,OAAO,OAAO;IACnC;IAEA,IAAA,wRAAS,EAAC;QACR,MAAM,SAAS,IAAA,sNAAc;QAE7B,MAAM,uBAAuB,CAAC;YAC5B,SAAS,IAAA,sOAAc,EAAC,SAAS,KAAK;QACxC;QAEA,OAAO,EAAE,CAAC,aAAa;QAEvB,6BAA6B;QAC7B,OAAO,IAAI,CAAC;QAEZ,OAAO;YACL,OAAO,GAAG,CAAC,aAAa;QAC1B;IACF,GAAG;QAAC;KAAS;IAEb,oFAAoF;IACpF,IAAA,wRAAS,EAAC;QACR,IACE,SAAS,MAAM,GAAG,KAClB,CAAC,cAAc,OAAO,IACtB,CAAC,eAAe,cAChB;YACA,MAAM,YAAY,QAAQ,CAAC,EAAE;YAC7B,MAAM,cAAc,WAAW,SAAS,CAAC,EAAE;YAC3C,IAAI,aAAa,gBAAgB;QACnC;IACF,GAAG;QAAC;QAAU;KAAc;IAE5B,4CAA4C;IAE5C,qBACE,oTAAC;QAAI,WAAU;;0BAEb,oTAAC;gBAAI,WAAU;;kCACb,oTAAC;wBAAO,SAAS,IAAM,OAAO,IAAI,CAAC;wBAAM,WAAU;;;;;;kCACnD,oTAAC;wBAAG,WAAU;kCAAuD;;;;;;;;;;;;0BAMvE,oTAAC;gBAAI,WAAU;;kCACb,oTAAC;wBAAI,WAAU;kCACb,cAAA,oTAAC,8MAAK;4BACJ,KAAI;4BACJ,KAAI;4BACJ,WAAU;4BACV,OAAO;4BACP,QAAQ;;;;;;;;;;;kCAGZ,oTAAC;wBACC,MAAK;wBACL,WAAU;wBACV,aAAY;;;;;;;;;;;;0BAIhB,oTAAC;gBAAI,WAAU;0BACZ,SAAS,MAAM,GAAG,IACjB,SAAS,GAAG,CAAC,CAAC,MAAM;oBAClB,MAAM,OAAO,KAAK,YAAY;oBAC9B,MAAM,SAAS,KAAK,OAAO,CAAC,EAAE,EAAE,mCAAmC;oBACnE,MAAM,gBACJ,QAAQ,UAAU,CAAC,OAAO,QAAQ,CAAC,MAAM,GAAG,EAAE;oBAEhD,qBACE;kCACE,cAAA,oTAAC,mNAAQ;4BAEP,MAAM;4BACN,eAAe;4BACf,QAAQ,OAAO,OAAO;4BACtB,aAAa,OAAO,YAAY;4BAChC,SAAS;gCACP,IAAI,QAAQ,gBAAgB;gCAC5B,IAAI,aAAa,eAAe,2BAA2B;4BAC7D;2BARK,KAAK,OAAO,GAAG,MAAM;;;;;;gBAYlC,mBAEA;8BACE,cAAA,oTAAC;wBAAI,WAAU;kCASb,cAAA,oTAAC;4BAAE,WAAU;sCAAgC;;;;;;;;;;;;;;;;;;;;;;;AAO3D;uCAEe","debugId":null}},
    {"offset": {"line": 358, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Downloads/TIKTOK%20%282%29/TIKTOK/reel-boost-website/src/app/message/ChatHeader.tsx"],"sourcesContent":["\"use client\";\r\nimport React from \"react\";\r\nimport Image from \"next/image\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/hooks\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { setUserId } from \"../store/Slice/UserIdHashtagIdSlice\";\r\nimport { IoIosArrowBack } from \"react-icons/io\";\r\n\r\ninterface ChatHeaderProps {\r\n  onBack?: () => void; // callback for mobile back\r\n}\r\n\r\nfunction ChatHeader({ onBack }: ChatHeaderProps) {\r\n  const dispatch = useAppDispatch();\r\n  const router = useRouter();\r\n  const currentConversation = useAppSelector(\r\n    (state) => state.CurrentConversation\r\n  );\r\n\r\n  const peerUser = currentConversation.PeerUserData;\r\n\r\n  // online users\r\n  const onlineUsers = useAppSelector((state) => state.OnlineUserList);\r\n  const chat_id = useAppSelector((state) => state.SendMessageData.chat_id);\r\n  const chatId = currentConversation.chat_id;\r\n  const isOnline =\r\n    peerUser && Array.isArray(onlineUsers)\r\n      ? onlineUsers.some((u) => u.user_id === peerUser.user_id)\r\n      : false;\r\n\r\n  const isTyping = useAppSelector((state) => state.SendMessageData.typing);\r\n\r\n  const handleUserRoute = (userId: number) => {\r\n    dispatch(setUserId(userId));\r\n    router.push(`/profile/${userId}`);\r\n  };\r\n\r\n  // helper for last seen\r\n  function formatLastSeen(timestamp: string | null) {\r\n    if (!timestamp) return \"Offline\";\r\n\r\n    const date = new Date(timestamp);\r\n    return date.toLocaleTimeString([], {\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\",\r\n      hour12: true,\r\n    });\r\n  }\r\n\r\n  return !peerUser ? null : (\r\n    <div className=\"flex xl:mt-16 justify-between sm:px-6 px-4 py-4 border border-[#E5E7EB]\">\r\n      <div\r\n        className=\"flex items-center sm:gap-2 gap-1 cursor-pointer\"\r\n        onClick={() => handleUserRoute(peerUser.user_id)}\r\n      >\r\n        <button onClick={onBack} className=\"sm:hidden block text-dark pr-4\">\r\n          <IoIosArrowBack />\r\n        </button>\r\n\r\n        <Image\r\n          src={peerUser.profile_pic}\r\n          alt=\"profile\"\r\n          className=\"w-9 h-9 rounded-full object-cover\"\r\n          height={100}\r\n          width={100}\r\n        />\r\n\r\n        <div className=\"ml-2 flex flex-col\">\r\n          <h2 className=\"font-semibold text-sm text-dark font-gilroy_bold cursor-pointer\">\r\n            {peerUser.full_name}\r\n          </h2>\r\n          {isTyping && chatId == chat_id ? (\r\n            <p className=\"font-gilroy_md text-xs text-main-green\">typing...</p>\r\n          ) : (\r\n            <span\r\n              className={`text-xs  ${\r\n                isOnline ? \"text-main-green\" : \"text-dark\"\r\n              }`}\r\n            >\r\n              {isOnline\r\n                ? \"Online\"\r\n                : `Last seen at ${formatLastSeen(peerUser.updatedAt)}`}\r\n            </span>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatHeader;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAYA,SAAS,WAAW,EAAE,MAAM,EAAmB;IAC7C,MAAM,WAAW,IAAA,qNAAc;IAC/B,MAAM,SAAS,IAAA,qNAAS;IACxB,MAAM,sBAAsB,IAAA,qNAAc,EACxC,CAAC,QAAU,MAAM,mBAAmB;IAGtC,MAAM,WAAW,oBAAoB,YAAY;IAEjD,eAAe;IACf,MAAM,cAAc,IAAA,qNAAc,EAAC,CAAC,QAAU,MAAM,cAAc;IAClE,MAAM,UAAU,IAAA,qNAAc,EAAC,CAAC,QAAU,MAAM,eAAe,CAAC,OAAO;IACvE,MAAM,SAAS,oBAAoB,OAAO;IAC1C,MAAM,WACJ,YAAY,MAAM,OAAO,CAAC,eACtB,YAAY,IAAI,CAAC,CAAC,IAAM,EAAE,OAAO,KAAK,SAAS,OAAO,IACtD;IAEN,MAAM,WAAW,IAAA,qNAAc,EAAC,CAAC,QAAU,MAAM,eAAe,CAAC,MAAM;IAEvE,MAAM,kBAAkB,CAAC;QACvB,SAAS,IAAA,wOAAS,EAAC;QACnB,OAAO,IAAI,CAAC,CAAC,SAAS,EAAE,QAAQ;IAClC;IAEA,uBAAuB;IACvB,SAAS,eAAe,SAAwB;QAC9C,IAAI,CAAC,WAAW,OAAO;QAEvB,MAAM,OAAO,IAAI,KAAK;QACtB,OAAO,KAAK,kBAAkB,CAAC,EAAE,EAAE;YACjC,MAAM;YACN,QAAQ;YACR,QAAQ;QACV;IACF;IAEA,OAAO,CAAC,WAAW,qBACjB,oTAAC;QAAI,WAAU;kBACb,cAAA,oTAAC;YACC,WAAU;YACV,SAAS,IAAM,gBAAgB,SAAS,OAAO;;8BAE/C,oTAAC;oBAAO,SAAS;oBAAQ,WAAU;8BACjC,cAAA,oTAAC,sOAAc;;;;;;;;;;8BAGjB,oTAAC,8MAAK;oBACJ,KAAK,SAAS,WAAW;oBACzB,KAAI;oBACJ,WAAU;oBACV,QAAQ;oBACR,OAAO;;;;;;8BAGT,oTAAC;oBAAI,WAAU;;sCACb,oTAAC;4BAAG,WAAU;sCACX,SAAS,SAAS;;;;;;wBAEpB,YAAY,UAAU,wBACrB,oTAAC;4BAAE,WAAU;sCAAyC;;;;;iDAEtD,oTAAC;4BACC,WAAW,CAAC,SAAS,EACnB,WAAW,oBAAoB,aAC/B;sCAED,WACG,WACA,CAAC,aAAa,EAAE,eAAe,SAAS,SAAS,GAAG;;;;;;;;;;;;;;;;;;;;;;;AAOtE;uCAEe","debugId":null}},
    {"offset": {"line": 479, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Downloads/TIKTOK%20%282%29/TIKTOK/reel-boost-website/src/app/message/LoadMoreMessages.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useAppDispatch, useAppSelector } from \"../utils/hooks\";\r\nimport { socketInstance } from \"../socket/socket\";\r\nimport {\r\n  updatePagination,\r\n  setIsLoading,\r\n  setIsAtTop,\r\n} from \"../store/Slice/MessageOptionsSlice\";\r\nimport { prependMessageList } from \"../store/Slice/MessageListSlice\";\r\nimport { MessageListRes } from \"../types/MessageListType\";\r\nimport { ClipLoader } from \"react-spinners\";\r\n\r\nexport default function LoadMoreMessages() {\r\n  const dispatch = useAppDispatch();\r\n  const messageListDetails = useAppSelector((state) => state.MessageOptions);\r\n\r\n  const { currentPage, totalPages, messageListAtTop, isMessageLoading } =\r\n    useAppSelector((state) => state.MessageOptions);\r\n  const currentConversation = useAppSelector(\r\n    (state) => state.CurrentConversation\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!messageListAtTop || isMessageLoading) return;\r\n    if (currentPage >= totalPages) return;\r\n\r\n    const socket = socketInstance();\r\n    if (!socket) return;\r\n\r\n    dispatch(setIsLoading(true));\r\n\r\n    // socket.emit(\"message_list\", {\r\n    //   chat_id: currentConversation.chat_id,\r\n    //   page: currentPage + 1, // âœ… Dynamic page increment\r\n    //   pageSize: 1000,\r\n    // });\r\n\r\n    const handleMessageList = (res: MessageListRes) => {\r\n      dispatch(prependMessageList(res.Records)); // âœ… Prepend to existing list\r\n      dispatch(\r\n        updatePagination({\r\n          currentPage: res.Pagination.current_page,\r\n          totalPages: res.Pagination.total_pages,\r\n        })\r\n      );\r\n      dispatch(setIsLoading(false));\r\n      dispatch(setIsAtTop(false)); // reset scroll trigger\r\n    };\r\n\r\n    // socket.once(\"message_list\", handleMessageList);\r\n\r\n    return () => {\r\n      // socket.off(\"message_list\", handleMessageList);\r\n    };\r\n  }, [\r\n    messageListAtTop,\r\n    currentPage,\r\n    totalPages,\r\n    isMessageLoading,\r\n    currentConversation,\r\n    dispatch,\r\n  ]);\r\n\r\n  return (\r\n    <>\r\n      {messageListDetails.isMoreMessageLoading && (\r\n        <div className=\"flex h-14 w-full justify-center\">\r\n          <ClipLoader size={23} color=\"green\" />\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AAKA;AAEA;AAXA;;;;;;;;AAae,SAAS;IACtB,MAAM,WAAW,IAAA,qNAAc;IAC/B,MAAM,qBAAqB,IAAA,qNAAc,EAAC,CAAC,QAAU,MAAM,cAAc;IAEzE,MAAM,EAAE,WAAW,EAAE,UAAU,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,GACnE,IAAA,qNAAc,EAAC,CAAC,QAAU,MAAM,cAAc;IAChD,MAAM,sBAAsB,IAAA,qNAAc,EACxC,CAAC,QAAU,MAAM,mBAAmB;IAGtC,IAAA,wRAAS,EAAC;QACR,IAAI,CAAC,oBAAoB,kBAAkB;QAC3C,IAAI,eAAe,YAAY;QAE/B,MAAM,SAAS,IAAA,sNAAc;QAC7B,IAAI,CAAC,QAAQ;QAEb,SAAS,IAAA,0OAAY,EAAC;QAEtB,gCAAgC;QAChC,0CAA0C;QAC1C,uDAAuD;QACvD,oBAAoB;QACpB,MAAM;QAEN,MAAM,oBAAoB,CAAC;YACzB,SAAS,IAAA,6OAAkB,EAAC,IAAI,OAAO,IAAI,6BAA6B;YACxE,SACE,IAAA,8OAAgB,EAAC;gBACf,aAAa,IAAI,UAAU,CAAC,YAAY;gBACxC,YAAY,IAAI,UAAU,CAAC,WAAW;YACxC;YAEF,SAAS,IAAA,0OAAY,EAAC;YACtB,SAAS,IAAA,wOAAU,EAAC,SAAS,uBAAuB;QACtD;QAEA,kDAAkD;QAElD,OAAO;QACL,iDAAiD;QACnD;IACF,GAAG;QACD;QACA;QACA;QACA;QACA;QACA;KACD;IAED,qBACE;kBACG,mBAAmB,oBAAoB,kBACtC,oTAAC;YAAI,WAAU;sBACb,cAAA,oTAAC,mRAAU;gBAAC,MAAM;gBAAI,OAAM;;;;;;;;;;;;AAKtC","debugId":null}},
    {"offset": {"line": 557, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Downloads/TIKTOK%20%282%29/TIKTOK/reel-boost-website/src/app/utils/MediaViewerUrl.ts"],"sourcesContent":["// utils/MediaPreviewStore.ts\r\n\r\nlet currentMediaUrl: string | null = null;\r\n\r\nexport function setMediaUrl(url: string) {\r\n  currentMediaUrl = url;\r\n}\r\n\r\nexport function getMediaUrl(): string | null {\r\n  return currentMediaUrl;\r\n}\r\n\r\nexport function clearMediaUrl() {\r\n  currentMediaUrl = null;\r\n}\r\n"],"names":[],"mappings":"AAAA,6BAA6B;;;;;;;;;AAE7B,IAAI,kBAAiC;AAE9B,SAAS,YAAY,GAAW;IACrC,kBAAkB;AACpB;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS;IACd,kBAAkB;AACpB","debugId":null}},
    {"offset": {"line": 580, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Downloads/TIKTOK%20%282%29/TIKTOK/reel-boost-website/src/app/message/OpenImageFromChat.tsx"],"sourcesContent":["\"use client\";\r\nimport Image from \"next/image\";\r\nimport React from \"react\";\r\nimport { hideModal } from \"../store/Slice/ModalsSlice\";\r\nimport { useAppDispatch } from \"../utils/hooks\";\r\n\r\nfunction PreviewComponent({ url }:{url:string}) {\r\n\r\n  const dispatch = useAppDispatch();\r\n  const handleCloseModal = () => {\r\n    dispatch(hideModal(\"OpenImageFromChat\"))\r\n  }\r\n  return (\r\n    <>\r\n      <div className=\"fixed inset-0 flex items-center justify-center bg-dark/[0.60] backdrop-blur-sm z-1000\">\r\n        <button\r\n          onClick={handleCloseModal}\r\n          className=\"absolute top-0 text-2xl right-1 cursor-pointer text-primary rounded-full p-2 transition\"\r\n        >\r\n          âœ•\r\n        </button>\r\n        <div className=\" rounded-2xl shadow-xl w-[50%] h-[80%] relative\">\r\n          {/* For the Image open */}\r\n          <div className=\"w-full h-full rounded-2xl\">\r\n            <Image\r\n              src={url}\r\n              className=\"w-full h-full object-contain rounded-2xl\"\r\n              alt=\"Image\"\r\n              width={1000}\r\n              height={1000}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default PreviewComponent;\r\n"],"names":[],"mappings":";;;;;AACA;AAEA;AACA;AAJA;;;;;AAMA,SAAS,iBAAiB,EAAE,GAAG,EAAe;IAE5C,MAAM,WAAW,IAAA,qNAAc;IAC/B,MAAM,mBAAmB;QACvB,SAAS,IAAA,+NAAS,EAAC;IACrB;IACA,qBACE;kBACE,cAAA,oTAAC;YAAI,WAAU;;8BACb,oTAAC;oBACC,SAAS;oBACT,WAAU;8BACX;;;;;;8BAGD,oTAAC;oBAAI,WAAU;8BAEb,cAAA,oTAAC;wBAAI,WAAU;kCACb,cAAA,oTAAC,8MAAK;4BACJ,KAAK;4BACL,WAAU;4BACV,KAAI;4BACJ,OAAO;4BACP,QAAQ;;;;;;;;;;;;;;;;;;;;;;;AAOtB;uCAEe","debugId":null}},
    {"offset": {"line": 649, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Downloads/TIKTOK%20%282%29/TIKTOK/reel-boost-website/src/app/message/OpenVideoFromChat.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useRef, useState } from \"react\";\r\nimport { useAppDispatch } from \"../utils/hooks\";\r\nimport { hideModal } from \"../store/Slice/ModalsSlice\";\r\nimport Image from \"next/image\";\r\n\r\nfunction OpenVideoComponent({ url }:{url:string}) {\r\n\r\n  const dispatch = useAppDispatch();\r\n\r\n  const handleCloseModal = () => {\r\n    dispatch(hideModal(\"OpenVideoFromChat\"));\r\n  };\r\n\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [showControls, setShowControls] = useState(false);\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const handleVideoClick = () => {\r\n    if (videoRef.current) {\r\n      if (videoRef.current.paused) {\r\n        videoRef.current.play();\r\n        setIsPlaying(true);\r\n        setShowControls(false); // Hide immediately when playing\r\n      } else {\r\n        videoRef.current.pause();\r\n        setIsPlaying(false);\r\n        setShowControls(true); // Show controls when paused\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"fixed inset-0 flex items-center justify-center bg-dark/[0.60] backdrop-blur-sm z-1000\">\r\n        <button\r\n          onClick={handleCloseModal}\r\n          className=\"absolute top-0 cursor-pointer text-2xl right-1 text-primary rounded-full p-2 transition\"\r\n        >\r\n          âœ•\r\n        </button>\r\n        <div className=\" rounded-2xl shadow-xl w-[50%] h-[80%] relative\">\r\n          {/* For the Image open */}\r\n          <div className=\"w-full h-full rounded-2xl relative\">\r\n            <video\r\n              src={url}\r\n              ref={videoRef}\r\n              className=\"w-full h-full object-cover rounded-2xl cursor-pointer\"\r\n              width={50}\r\n              autoPlay\r\n              loop\r\n              height={50}\r\n              onClick={handleVideoClick}\r\n            />\r\n\r\n            {!isPlaying && showControls && (\r\n              <div className=\"absolute inset-0 flex justify-center items-center\">\r\n                <button\r\n                  onClick={handleVideoClick}\r\n                  className=\"p-4  backdrop-blur-md rounded-full\"\r\n                >\r\n                  <Image\r\n                    src={isPlaying ? \"/chat/Pause.png\" : \"/chat/play.png\"}\r\n                    alt=\"play_pause\"\r\n                    height={20}\r\n                    width={20}\r\n                  />\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default OpenVideoComponent;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AAJA;;;;;;AAMA,SAAS,mBAAmB,EAAE,GAAG,EAAe;IAE9C,MAAM,WAAW,IAAA,qNAAc;IAE/B,MAAM,mBAAmB;QACvB,SAAS,IAAA,+NAAS,EAAC;IACrB;IAEA,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,uRAAQ,EAAC;IAC3C,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,uRAAQ,EAAC;IACjD,MAAM,WAAW,IAAA,qRAAM,EAAmB;IAC1C,MAAM,mBAAmB;QACvB,IAAI,SAAS,OAAO,EAAE;YACpB,IAAI,SAAS,OAAO,CAAC,MAAM,EAAE;gBAC3B,SAAS,OAAO,CAAC,IAAI;gBACrB,aAAa;gBACb,gBAAgB,QAAQ,gCAAgC;YAC1D,OAAO;gBACL,SAAS,OAAO,CAAC,KAAK;gBACtB,aAAa;gBACb,gBAAgB,OAAO,4BAA4B;YACrD;QACF;IACF;IAEA,qBACE;kBACE,cAAA,oTAAC;YAAI,WAAU;;8BACb,oTAAC;oBACC,SAAS;oBACT,WAAU;8BACX;;;;;;8BAGD,oTAAC;oBAAI,WAAU;8BAEb,cAAA,oTAAC;wBAAI,WAAU;;0CACb,oTAAC;gCACC,KAAK;gCACL,KAAK;gCACL,WAAU;gCACV,OAAO;gCACP,QAAQ;gCACR,IAAI;gCACJ,QAAQ;gCACR,SAAS;;;;;;4BAGV,CAAC,aAAa,8BACb,oTAAC;gCAAI,WAAU;0CACb,cAAA,oTAAC;oCACC,SAAS;oCACT,WAAU;8CAEV,cAAA,oTAAC,8MAAK;wCACJ,KAAK,YAAY,oBAAoB;wCACrC,KAAI;wCACJ,QAAQ;wCACR,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAU3B;uCAEe","debugId":null}},
    {"offset": {"line": 766, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Downloads/TIKTOK%20%282%29/TIKTOK/reel-boost-website/src/app/message/AllMessages.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport { useAppSelector, useAppDispatch } from \"../utils/hooks\";\r\nimport Cookies from \"js-cookie\";\r\nimport GoogleMapReact from \"google-map-react\";\r\nimport {\r\n  setIsAtTop,\r\n} from \"../store/Slice/MessageOptionsSlice\";\r\nimport { ClipLoader } from \"react-spinners\";\r\nimport LoadMoreMessages from \"./LoadMoreMessages\";\r\nimport { MdLocationPin } from \"react-icons/md\";\r\nimport { showModal } from \"../store/Slice/ModalsSlice\";\r\nimport { setMediaUrl } from \"../utils/MediaViewerUrl\";\r\nimport OpenImageFromChat from \"./OpenImageFromChat\";\r\nimport OpenVideoComponent from \"./OpenVideoFromChat\";\r\nimport { MdWavingHand } from \"react-icons/md\";\r\nimport { setSelectedReel } from \"../store/Slice/SelectedReelDetail\";\r\nimport {\r\n  setActiveCommentPostId,\r\n  setActiveUserId,\r\n} from \"../store/Slice/ActiveCommentBox\";\r\nimport ReelDetailsModal from \"../explore/SelectedReelModal\";\r\nimport { is } from \"date-fns/locale\";\r\nimport { Reel } from \"../types/Reels\";\r\n\r\nconst myUserId = Cookies.get(\"Reelboost_user_id\");\r\n\r\ninterface Message {\r\n  createdAt: string;\r\n  [key: string]: any; // other fields\r\n}\r\n\r\ninterface GroupedMessages {\r\n  date: string;\r\n  msgs: Message[];\r\n}\r\n\r\n\r\nconst formatTime = (utc: string) =>\r\n  new Date(utc).toLocaleTimeString([], {\r\n    hour: \"2-digit\",\r\n    minute: \"2-digit\",\r\n  });\r\n\r\nconst groupMessagesByDate = (messages: any[]) => {\r\n  const grouped: { [key: string]: any[] } = {}; \r\n  for (const msg of messages) {\r\n    const date = new Date(msg.createdAt);\r\n    if (isNaN(date.getTime())) continue; // Skip invalid date\r\n\r\n    const formattedDate = date.toLocaleDateString(\"en-US\", {\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"2-digit\",\r\n    });\r\n\r\n    if (!grouped[formattedDate]) grouped[formattedDate] = [];\r\n    grouped[formattedDate].push(msg);\r\n  }\r\n\r\n  return Object.entries(grouped).map(([date, msgs]) => ({ date, msgs }));\r\n};\r\n\r\nexport default function AllMessages() {\r\n  const bottomRef = useRef<HTMLDivElement | null>(null);\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const dispatch = useAppDispatch();\r\n  const isAtTop = useAppSelector(\r\n    (state) => state.MessageOptions.messageListAtTop\r\n  );\r\n  const seenStatus = useAppSelector((state) => state.SeenStatus.seenMessages);\r\n\r\n  const messages = useAppSelector((state) => state.MessageList);\r\n\r\n\r\n  const currentConversation = useAppSelector(\r\n    (state) => state.CurrentConversation\r\n  );\r\n  const { currentPage, totalPages, isMessageLoading } = useAppSelector(\r\n    (state) => state.MessageOptions\r\n  );\r\n\r\n  const groupedMessages = groupMessagesByDate(\r\n    [...messages].sort(\r\n      (a, b) =>\r\n        new Date(a.createdAt).getTime() - new Date(b.createdAt).getTime()\r\n    )\r\n  );\r\n\r\n  useEffect(() => {\r\n    bottomRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages, currentConversation.chat_id]);\r\n\r\n  useEffect(() => {\r\n    const container = containerRef.current;\r\n    if (!container) return;\r\n\r\n    const onScroll = () => {\r\n      if (\r\n        container.scrollTop <= 50 &&\r\n        currentPage < totalPages &&\r\n        !isMessageLoading\r\n      ) {\r\n        dispatch(setIsAtTop(true)); // trigger LoadMoreMessages\r\n      }\r\n    };\r\n\r\n    container.addEventListener(\"scroll\", onScroll);\r\n    return () => container.removeEventListener(\"scroll\", onScroll);\r\n  }, [currentPage, totalPages, isMessageLoading, dispatch]);\r\n\r\n  const scrollToBottom = () => {\r\n    bottomRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  const peerUser = currentConversation.PeerUserData;\r\n  const isOpenImageFromChat = useAppSelector(\r\n    (state) => state.modals.OpenImageFromChat\r\n  );\r\n  const [url, setUrl] = useState(\"\");\r\n  const isOpenVideoFromChat = useAppSelector(\r\n    (state) => state.modals.OpenVideoFromChat\r\n  );\r\n\r\n\r\n  return (\r\n    <>\r\n      <LoadMoreMessages />\r\n\r\n      <div\r\n        className=\"flex-1 overflow-y-auto px-4 py-2 space-y-4 relative\"\r\n        ref={containerRef}\r\n      >\r\n        {isMessageLoading || (!peerUser && isMessageLoading) ? (\r\n          <div className=\"flex justify-center items-center min-h-screen\">\r\n            <ClipLoader size={35} color=\"#4CAF50\" />\r\n          </div>\r\n        ) : !peerUser ? (\r\n          // No conversation selected\r\n          <div className=\"flex flex-col items-center justify-center text-gray-500 text-sm py-96\">\r\n            {/* <Image src=\"/home/Empty.png\" height={60} width={60} alt=\"empty\" /> */}\r\n            <p className=\"text-dark text-sm flex gap-2 place-items-center\">\r\n              Start Conversation{\" \"}\r\n              <MdWavingHand className=\"text-yellow-500 text-xl\" />\r\n            </p>\r\n          </div>\r\n        ) : groupedMessages.length > 0 ? (\r\n          // Messages list\r\n          groupedMessages.map((group, index) => (\r\n            <div key={index}>\r\n              <div className=\"text-center text-xs text-gray-500 my-3\">\r\n                {group.date}\r\n              </div>\r\n              {group.msgs.map((msg) => {\r\n                const isMine = msg.sender_id === parseInt(myUserId ?? \"\");\r\n                return (\r\n                  <div\r\n                    key={msg.message_id}\r\n                    className={`flex ${\r\n                      isMine ? \"justify-end\" : \"justify-start\"\r\n                    } mb-3`}\r\n                  >\r\n                    <div className=\"flex items-end space-x-2.5 max-w-xs\">\r\n                      {!isMine && (\r\n                        <Image\r\n                          src={msg.User?.profile_pic}\r\n                          width={20}\r\n                          height={20}\r\n                          className=\"rounded-full\"\r\n                          alt=\"avatar\"\r\n                        />\r\n                      )}\r\n\r\n                      <div>\r\n                        {/* Text ========================================= */}\r\n                        {msg.message_type === \"text\" && (\r\n                          <div className=\"relative\">\r\n                            <div\r\n                              className={`px-3 py-2 rounded-lg break-words max-w-[300px] text-sm text-primary ${\r\n                                isMine\r\n                                  ? \"bg-main-green rounded-br-none\"\r\n                                  : \"bg-dark-gray rounded-bl-none\"\r\n                              }`}\r\n                            >\r\n                              {msg.message_content}\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Image =================================== */}\r\n                        {msg.message_type === \"image\" && (\r\n                          <Image\r\n                            src={msg.message_content}\r\n                            width={200}\r\n                            height={200}\r\n                            alt=\"Image\"\r\n                            className={`rounded-lg border cursor-pointer ${\r\n                              isMine ? \"bg-main-green\" : \"bg-opposite-color\"\r\n                            }`}\r\n                            onClick={() => {\r\n                              setMediaUrl(msg.message_content);\r\n                              setUrl(msg.message_content);\r\n                              dispatch(showModal(\"OpenImageFromChat\"));\r\n                            }}\r\n                          />\r\n                        )}\r\n\r\n                        {/* Video ===================================== */}\r\n                        {msg.message_type === \"video\" && (\r\n                          <div className=\"relative w-[220px]\">\r\n                            {/* Video thumbnail */}\r\n                            <Image\r\n                              src={\r\n                                msg.message_thumbnail ||\r\n                                \"/placeholder-video.png\"\r\n                              }\r\n                              width={220}\r\n                              height={400}\r\n                              alt=\"Video\"\r\n                              className=\"rounded-lg border cursor-pointer\"\r\n                              onClick={() => {\r\n                                setMediaUrl(msg.message_content);\r\n                                setUrl(msg.message_content);\r\n                                dispatch(showModal(\"OpenVideoFromChat\"));\r\n                              }}\r\n                            />\r\n\r\n                            {/* Play/Pause overlay icon */}\r\n                            <div\r\n                              className=\"absolute inset-0 flex items-center justify-center z-10 cursor-pointer\"\r\n                              onClick={() => {\r\n                                setMediaUrl(msg.message_content);\r\n                                setUrl(msg.message_content);\r\n                                dispatch(showModal(\"OpenVideoFromChat\"));\r\n                              }}\r\n                            >\r\n                              <Image\r\n                                src=\"/chat/play.png\" // change to pause.png when needed\r\n                                alt=\"play\"\r\n                                width={35}\r\n                                height={35}\r\n                                className=\"drop-shadow-lg\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Document ================================== */}\r\n                        {msg.message_type === \"doc\" && (\r\n                          <div className=\"w-full max-w-80 rounded-[9px]\">\r\n                            <div className=\"flex items-center justify-between gap-2 rounded-[7px] p-4 px-6 text-sm bg-[#FAFAFA]\">\r\n                              <div className=\"flex items-center gap-2\">\r\n                                <Image\r\n                                  className=\"h-10 w-10 object-cover\"\r\n                                  src=\"/chat/pdf_icons.png\"\r\n                                  alt=\"\"\r\n                                  width={100}\r\n                                  height={100}\r\n                                />\r\n                                <div className=\"w-full text-dark line-clamp-2 max-w-60 text-xs overflow-hidden\">\r\n                                  {msg.message_content\r\n                                    ?.split(\"/\")\r\n                                    .pop()\r\n                                    ?.split(\"-\")\r\n                                    .slice(1)\r\n                                    .join(\"-\") || \"\"}\r\n                                </div>\r\n                              </div>\r\n\r\n                              {/* Download button */}\r\n                              <a\r\n                                href={msg.message_content}\r\n                                download={\r\n                                  msg.message_content\r\n                                    ?.split(\"/\")\r\n                                    .pop()\r\n                                    ?.split(\"-\")\r\n                                    .slice(1)\r\n                                    .join(\"-\") || \"document\"\r\n                                }\r\n                              >\r\n                                <Image\r\n                                  src=\"/chat/Download_icon.png\"\r\n                                  className=\"h-6 w-6 cursor-pointer\"\r\n                                  alt=\"Download\"\r\n                                  width={1000}\r\n                                  height={1000}\r\n                                />\r\n                              </a>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Location ============================================= */}\r\n                        {msg.message_type === \"location\" && (\r\n                          <div className=\"h-52 w-full max-w-80 rounded-[9px] min-w-64 pt-1 bg-main-green\">\r\n                            <div className=\"mx-auto mt-1 h-40 w-[95%] max-w-80\">\r\n                              {(() => {\r\n                                const [latitude, longitude] =\r\n                                  msg.message_content.split(\",\").map(Number);\r\n\r\n                                return (\r\n                                  <GoogleMapReact\r\n                                    bootstrapURLKeys={{\r\n                                      key: \"AIzaSyAMZ4GbRFYSevy7tMaiH5s0JmMBBXc0qBA\",\r\n                                    }}\r\n                                    defaultCenter={{\r\n                                      lat: latitude,\r\n                                      lng: longitude,\r\n                                    }}\r\n                                    defaultZoom={13}\r\n                                    draggable={false}\r\n                                  >\r\n                                    <MdLocationPin className=\"text-3xl text-dark\" />\r\n                                  </GoogleMapReact>\r\n                                );\r\n                              })()}\r\n                            </div>\r\n                            <div className=\"grid place-content-center\">\r\n                              {(() => {\r\n                                const [latitude, longitude] =\r\n                                  msg.message_content.split(\",\").map(Number);\r\n\r\n                                return (\r\n                                  <a\r\n                                    target=\"_blank\"\r\n                                    href={`http://maps.google.com/maps?z=12&t=m&q=loc:${latitude}+${longitude}`}\r\n                                    className=\"mt-3 w-full cursor-pointer font-medium text-primary\"\r\n                                  >\r\n                                    View Location\r\n                                  </a>\r\n                                );\r\n                              })()}\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Social Reel ======================================================================================= */}\r\n                        {msg.message_type === \"social\" && (\r\n                          <div\r\n                            className={`relative w-48 h-full rounded-t-lg rounded-bl-lg overflow-hidden cursor-pointer p-1 ${\r\n                              isMine ? \"bg-main-green\" : \"bg-dark-gray\"\r\n                            }`}\r\n                            onClick={() => {\r\n                              dispatch(\r\n                                setSelectedReel({\r\n                                  ...msg.Social,\r\n                                  User: msg.User,\r\n                                  Media: [\r\n                                    {\r\n                                      media_location: msg.message_content, // video URL from message\r\n                                    },\r\n                                  ],\r\n                                })\r\n                              );\r\n\r\n                              dispatch(\r\n                                setActiveCommentPostId(msg.Social.social_id)\r\n                              );\r\n                              dispatch(setActiveUserId(msg.User.user_id));\r\n                            }}\r\n                          >\r\n                            <div className=\"relative\">\r\n                              <Image\r\n                                src={msg.Social.reel_thumbnail}\r\n                                alt=\"reel\"\r\n                                className=\"w-full h-64 object-cover rounded-lg\"\r\n                                height={640}\r\n                                width={640}\r\n                              />\r\n                              {/* Reel icon with curved corner */}\r\n                              <div\r\n                                className={`absolute bottom-0 ${\r\n                                  isMine\r\n                                    ? \" rounded-full -bottom-1 -right-1 bg-main-green p-0.5\"\r\n                                    : \"-left-1 p-0.5 -bottom-1 rounded-full bg-[#54505B]\"\r\n                                } `}\r\n                              >\r\n                                <Image\r\n                                  src=\"/SidebarIcons/reel_icon.png\" // use your reel icon path\r\n                                  alt=\"Reel Icon\"\r\n                                  className=\"w-5 h-5 rounded-full pt-0.5 pr-0.5\"\r\n                                  width={100}\r\n                                  height={100}\r\n                                />\r\n                              </div>\r\n                            </div>\r\n\r\n                            {/* User info ============================================================ */}\r\n                            <div className=\"absolute top-2 left-2 flex gap-1 items-center\">\r\n                              <Image\r\n                                src={msg.User.profile_pic}\r\n                                alt=\"user\"\r\n                                className=\"w-6 h-6 rounded-full\"\r\n                                width={80}\r\n                                height={80}\r\n                              />\r\n                              <p className=\"text-primary text-sm font-gilroy_semibold inline-block drop-shadow-[0_1px_2px_rgba(0,0,0,3)]\">\r\n                                {msg.User.user_name}\r\n                              </p>\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* Gif ============================================================== */}\r\n                        {msg.message_type === \"gif\" && (\r\n                          <div>\r\n                            <Image\r\n                              className={`h-full w-[17rem] select-none rounded-lg object-cover transition-all duration-300`}\r\n                              alt=\"gif\"\r\n                              src={msg.message_content}\r\n                              width={300}\r\n                              height={300}\r\n                            />\r\n                          </div>\r\n                        )}\r\n\r\n                        {/* time ============================================================= */}\r\n                        <div\r\n                          className={`flex place-items-center gap-1 ${\r\n                            isMine ? \"justify-end\" : \"\"\r\n                          }`}\r\n                        >\r\n                          <div\r\n                            className={`text-[10px] text-gray-500 mt-1 ${\r\n                              isMine ? \"text-right\" : \"text-left\"\r\n                            }`}\r\n                          >\r\n                            {formatTime(msg.createdAt)}\r\n                          </div>\r\n\r\n                          {isMine && (\r\n                            <Image\r\n                              src={\r\n                                seenStatus[msg.message_id] === \"seen\" ||\r\n                                msg.message_seen_status === \"seen\"\r\n                                  ? \"/chat/seenTick.png\"\r\n                                  : \"/chat/unseenTick.png\"\r\n                              }\r\n                              alt=\"seen\"\r\n                              width={14}\r\n                              height={14}\r\n                              className=\"w-4 h-2\"\r\n                            />\r\n                          )}\r\n                        </div>\r\n                      </div>\r\n\r\n                      {isMine && (\r\n                        <Image\r\n                          src={msg.User?.profile_pic}\r\n                          width={20}\r\n                          height={20}\r\n                          className=\"rounded-full\"\r\n                          alt=\"avatar\"\r\n                        />\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          ))\r\n        ) : (\r\n          // Empty conversation after loading is complete\r\n          <div className=\"flex flex-col items-center justify-center text-gray-500 text-sm py-72\">\r\n            {/* <Image src=\"/home/Empty.png\" height={60} width={60} alt=\"empty\" /> */}\r\n            <p className=\"text-dark text-sm flex gap-2 place-items-center\">\r\n              Start Conversation{\" \"}\r\n              <MdWavingHand className=\"text-yellow-500 text-xl\" />\r\n            </p>\r\n          </div>\r\n        )}\r\n\r\n        <div ref={bottomRef} />\r\n      </div>\r\n\r\n      {isOpenImageFromChat && <OpenImageFromChat url={url} />}\r\n      {isOpenVideoFromChat && <OpenVideoComponent url={url} />}\r\n      <ReelDetailsModal setReels={function (value: React.SetStateAction<Reel[]>): void {\r\n        // throw new Error(\"Function not implemented.\");\r\n      } } />\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1394, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Downloads/TIKTOK%20%282%29/TIKTOK/reel-boost-website/src/app/message/MediaUploadInput.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport Image from \"next/image\";\r\nimport generateVideoThumbnail from \"../utils/generateVideoThumbnail\";\r\nimport { updateSendMessageData } from \"../store/Slice/SendMessageSlice\";\r\nimport { updateMessageOptions } from \"../store/Slice/MessageOptionsSlice\";\r\nimport { useAppDispatch } from \"../utils/hooks\";\r\n\r\ntype Props = {\r\n  setMediaFiles: React.Dispatch<React.SetStateAction<File[]>>;\r\n  setMediaType: React.Dispatch<\r\n    React.SetStateAction<\"chat_image\" | \"chat_video\" | \"doc\" | null>\r\n  >;\r\n  setMessageType: React.Dispatch<\r\n    React.SetStateAction<\"image\" | \"video\" | \"doc\" | null>\r\n  >;\r\n  setThumbnail: React.Dispatch<React.SetStateAction<string | null>>;\r\n};\r\n\r\nconst MediaUploadInput: React.FC<Props> = ({\r\n  setMediaFiles,\r\n  setMediaType,\r\n  setThumbnail,\r\n  setMessageType,\r\n}) => {\r\n  const [showOptions, setShowOptions] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n    const menuRef = useRef<HTMLDivElement>(null); // ðŸ“Œ New ref\r\n\r\n  const handleMediaClick = () => {\r\n    setShowOptions((prev) => !prev);\r\n  };\r\n  const dispatch = useAppDispatch();\r\n\r\n  const handleFileSelect = (\r\n    accept: string,\r\n    type: \"chat_image\" | \"chat_video\" | \"doc\"\r\n  ) => {\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.accept = accept;\r\n      fileInputRef.current.dataset.type = type;\r\n      fileInputRef.current.click();\r\n    }\r\n    setShowOptions(false);\r\n  };\r\n\r\n  const handleFileChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    const fileType = fileInputRef.current?.dataset.type as\r\n      | \"chat_image\"\r\n      | \"chat_video\"\r\n      | \"doc\";\r\n    setMediaType(fileType);\r\n    setMediaFiles([file]);\r\n\r\n    // âœ… Set MessageType based on fileType\r\n    if (fileType === \"chat_image\") {\r\n      setMessageType(\"image\");\r\n    } else if (fileType === \"chat_video\") {\r\n      setMessageType(\"video\");\r\n      const thumb = await generateVideoThumbnail(file);\r\n      setThumbnail(thumb);\r\n    } else {\r\n      setMessageType(\"doc\");\r\n    }\r\n  };\r\n\r\n    // ðŸ”’ Close menu on outside click\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {\r\n        setShowOptions(false);\r\n      }\r\n    };\r\n\r\n    if (showOptions) {\r\n      document.addEventListener(\"mousedown\", handleClickOutside);\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [showOptions]);\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      <input\r\n        type=\"file\"\r\n        ref={fileInputRef}\r\n        className=\"hidden\"\r\n        onChange={handleFileChange}\r\n      />\r\n\r\n      <button className=\"cursor-pointer\" onClick={handleMediaClick}>\r\n        <Image\r\n          src=\"/home/sendMedia.png\"\r\n          alt=\"Send Media\"\r\n          width={20}\r\n          height={20}\r\n        />\r\n      </button>\r\n\r\n      {showOptions && (\r\n        <div ref={menuRef} className=\"absolute bottom-6 flex mb-2 p-2 right-0 bg-primary border rounded-md shadow-lg z-50 w-[360px]\">\r\n          <button\r\n            onClick={() => handleFileSelect(\"image/*\", \"chat_image\")}\r\n            className=\"p-2 flex flex-col gap-2 place-items-center\"\r\n          >\r\n            <Image src=\"/chat/Photo.png\" alt=\"photo\" width={50} height={50} />\r\n            <span className=\"text-dark text-xs\">Image</span>\r\n          </button>\r\n          <button\r\n            onClick={() => handleFileSelect(\"video/*\", \"chat_video\")}\r\n            className=\"p-2 flex flex-col gap-2 place-items-center\"\r\n          >\r\n            <Image src=\"/chat/Video.png\" alt=\"video\" width={50} height={50} />\r\n            <span className=\"text-dark text-xs\">Video</span>\r\n          </button>\r\n          <button\r\n            onClick={() => handleFileSelect(\".pdf\", \"doc\")}\r\n            className=\"p-2 flex flex-col gap-2 place-items-center\"\r\n          >\r\n            <Image src=\"/chat/Document.png\" alt=\"doc\" width={50} height={50} />\r\n            <span className=\"text-dark text-xs\">Document</span>\r\n          </button>\r\n          <button\r\n            className=\"p-2 flex flex-col gap-2 place-items-center\"\r\n            onClick={() => {\r\n              dispatch(\r\n                updateSendMessageData({\r\n                  message_type: \"location\",\r\n                })\r\n              );\r\n              dispatch(\r\n                updateMessageOptions({\r\n                  show_send_location_modal: true,\r\n                })\r\n              );\r\n\r\n              close(); // Close the menu when clicked\r\n            }}\r\n          >\r\n            <Image src=\"/chat/Location.png\" alt=\"doc\" width={50} height={50} />\r\n            <span className=\"text-dark text-xs\">Location</span>\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              dispatch(\r\n                updateSendMessageData({\r\n                  message_type: \"location\",\r\n                })\r\n              );\r\n              dispatch(\r\n                updateSendMessageData({\r\n                  message_type: \"gif\",\r\n                  showGifPicker: true,\r\n                  // chat_id:\r\n                  //   CurrentConversationData.conversation_id,\r\n                })\r\n              );\r\n              close(); // Close the menu when clicked\r\n            }}\r\n            className=\"p-2 flex flex-col gap-2 place-items-center\"\r\n          >\r\n            <Image src=\"/chat/Gif.png\" alt=\"doc\" width={50} height={50} />\r\n            <span className=\"text-dark text-xs\">Gif</span>\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MediaUploadInput;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1674, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Downloads/TIKTOK%20%282%29/TIKTOK/reel-boost-website/src/app/message/EmojiPickerComponent.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport dynamic from \"next/dynamic\";\r\nimport Image from \"next/image\";\r\n\r\n// Dynamically import emoji-picker-react to avoid SSR issues\r\nconst EmojiPicker = dynamic(() => import(\"emoji-picker-react\"), { ssr: false });\r\n\r\ninterface EmojiPickerComponentProps {\r\n  onEmojiSelect: (emoji: string) => void;\r\n}\r\n\r\nconst EmojiPickerComponent: React.FC<EmojiPickerComponentProps> = ({\r\n  onEmojiSelect,\r\n}) => {\r\n  const [showPicker, setShowPicker] = useState(false);\r\n  const pickerRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Close picker when clicking outside\r\n  useEffect(() => {\r\n    function handleClickOutside(event: MouseEvent) {\r\n      if (\r\n        pickerRef.current &&\r\n        !pickerRef.current.contains(event.target as Node)\r\n      ) {\r\n        setShowPicker(false);\r\n      }\r\n    }\r\n    if (showPicker) {\r\n      document.addEventListener(\"mousedown\", handleClickOutside);\r\n    }\r\n    return () => {\r\n      document.removeEventListener(\"mousedown\", handleClickOutside);\r\n    };\r\n  }, [showPicker]);\r\n\r\n  return (\r\n    <div className=\"relative\" ref={pickerRef}>\r\n      {/* Emoji icon button */}\r\n      <button\r\n        type=\"button\"\r\n        className=\"p-2 rounded-full \"\r\n        onClick={() => setShowPicker((prev) => !prev)}\r\n      >\r\n        <Image src=\"/home/smile.png\" alt=\"Smile\" width={24} height={24} />\r\n      </button>\r\n\r\n      {/* Picker */}\r\n      {showPicker && (\r\n        <div className=\"absolute bottom-10 left-0 z-50\">\r\n          <EmojiPicker\r\n            onEmojiClick={(emojiData) => {\r\n              onEmojiSelect(emojiData.emoji);\r\n              setShowPicker(false);\r\n            }}\r\n          />\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmojiPickerComponent;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;;AAHA;;;;;AAKA,4DAA4D;AAC5D,MAAM,cAAc,IAAA,gPAAO;;;;;;IAAuC,KAAK;;AAMvE,MAAM,uBAA4D,CAAC,EACjE,aAAa,EACd;IACC,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,uRAAQ,EAAC;IAC7C,MAAM,YAAY,IAAA,qRAAM,EAAiB;IAEzC,qCAAqC;IACrC,IAAA,wRAAS,EAAC;QACR,SAAS,mBAAmB,KAAiB;YAC3C,IACE,UAAU,OAAO,IACjB,CAAC,UAAU,OAAO,CAAC,QAAQ,CAAC,MAAM,MAAM,GACxC;gBACA,cAAc;YAChB;QACF;QACA,IAAI,YAAY;YACd,SAAS,gBAAgB,CAAC,aAAa;QACzC;QACA,OAAO;YACL,SAAS,mBAAmB,CAAC,aAAa;QAC5C;IACF,GAAG;QAAC;KAAW;IAEf,qBACE,oTAAC;QAAI,WAAU;QAAW,KAAK;;0BAE7B,oTAAC;gBACC,MAAK;gBACL,WAAU;gBACV,SAAS,IAAM,cAAc,CAAC,OAAS,CAAC;0BAExC,cAAA,oTAAC,8MAAK;oBAAC,KAAI;oBAAkB,KAAI;oBAAQ,OAAO;oBAAI,QAAQ;;;;;;;;;;;YAI7D,4BACC,oTAAC;gBAAI,WAAU;0BACb,cAAA,oTAAC;oBACC,cAAc,CAAC;wBACb,cAAc,UAAU,KAAK;wBAC7B,cAAc;oBAChB;;;;;;;;;;;;;;;;;AAMZ;uCAEe","debugId":null}},
    {"offset": {"line": 1768, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Downloads/TIKTOK%20%282%29/TIKTOK/reel-boost-website/src/app/message/SendMessageInput.tsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useAppSelector, useAppDispatch } from \"../utils/hooks\";\r\nimport { socketInstance } from \"../socket/socket\";\r\nimport useApiPost from \"../hooks/postData\";\r\nimport Image from \"next/image\";\r\nimport MediaUploadInput from \"./MediaUploadInput\";\r\nimport EmojiPickerComponent from \"./EmojiPickerComponent\";\r\nimport { ClipLoader } from \"react-spinners\";\r\n\r\nfunction SendMessageInput() {\r\n  const dispatch = useAppDispatch();\r\n  const { postData } = useApiPost();\r\n  const currentConversation = useAppSelector(\r\n    (state) => state.CurrentConversation\r\n  );\r\n  const PeerUserData = currentConversation?.PeerUserData;\r\n \r\n\r\n  const chat_id = currentConversation?.chat_id;\r\n  const isNewConversation = currentConversation?.isNewConversation || false;\r\n\r\n  const [text, setText] = useState(\"\");\r\n  const [mediaFiles, setMediaFiles] = useState<File[]>([]);\r\n  const [mediaType, setMediaType] = useState<\r\n    \"chat_image\" | \"chat_video\" | \"doc\" | null\r\n  >(null);\r\n  const [MessageType, setMessageType] = useState<\r\n    \"image\" | \"video\" | \"doc\" | null\r\n  >(null);\r\n  const [thumbnail, setThumbnail] = useState<string | null>(null);\r\n\r\n  const clearInput = () => {\r\n    setText(\"\");\r\n    setMediaFiles([]);\r\n    setThumbnail(null);\r\n    setMediaType(null);\r\n    setMessageType(null);\r\n  };\r\n\r\n  const [isSending, setIsSending] = useState(false);\r\n\r\nconst handleSend = async () => {\r\n  if (isSending) return; // ðŸš« Block duplicate clicks\r\n  if (!text.trim() && mediaFiles.length === 0) return;\r\n\r\n  setIsSending(true); // ðŸ”’ Lock sending\r\n\r\n  const socket = socketInstance();\r\n\r\n  try {\r\n    if (mediaFiles.length > 0) {\r\n      const formData = new FormData();\r\n\r\n      if (isNewConversation) {\r\n        formData.append(\r\n          \"user_id\",\r\n          String(currentConversation?.PeerUserData?.user_id ?? \"\")\r\n        );\r\n        formData.append(\"chat_type\", \"private\");\r\n      } else {\r\n        formData.append(\"chat_id\", String(chat_id));\r\n      }\r\n\r\n      const pictureType = mediaType || \"doc\";\r\n      const messageType = MessageType || \"doc\";\r\n\r\n      formData.append(\"message_type\", messageType);\r\n      formData.append(\"pictureType\", pictureType);\r\n      formData.append(\"message_content\", \"\");\r\n\r\n      if (mediaType === \"chat_video\" && thumbnail) {\r\n        const blob = await fetch(thumbnail).then((res) => res.blob());\r\n        const thumbFile = new File([blob], \"thumbnail.png\", {\r\n          type: \"image/png\",\r\n        });\r\n        formData.append(\"files\", thumbFile);\r\n        formData.append(\"files\", mediaFiles[0]);\r\n      } else {\r\n        mediaFiles.forEach((file) => {\r\n          formData.append(\"files\", file);\r\n        });\r\n      }\r\n\r\n      await postData(\"/chat/send-message\", formData, \"multipart/form-data\");\r\n    }\r\n\r\n    if (text.trim()) {\r\n      const payload: Record<string, unknown> = {\r\n        message_type: \"text\",\r\n        message_content: text,\r\n      };\r\n\r\n      if (isNewConversation) {\r\n        payload.user_id = currentConversation?.PeerUserData?.user_id;\r\n        payload.chat_type = \"private\";\r\n      } else {\r\n        payload.chat_id = chat_id;\r\n      }\r\n\r\n      await postData(\"/chat/send-message\", payload);\r\n      socket.emit(\"chat_list\", { page: 1, pageSize: 1000 });\r\n    }\r\n\r\n    clearInput();\r\n  } catch (error) {\r\n  } finally {\r\n    setIsSending(false); // ðŸ”“ Unlock sending\r\n  }\r\n};\r\n\r\n\r\n\r\n  // for update of typing states =======================\r\n  const handleTyping = () => {\r\n    const socket = socketInstance();\r\n    if (socket && chat_id) {\r\n      const payload = { chat_id, typing: true };\r\n\r\n      // emit event to backend\r\n      socket.emit(\"typing\", payload);\r\n\r\n      // update Redux state locally\r\n      // dispatch(updateTypingState(payload));\r\n    }\r\n  };\r\n\r\n  // to false typing state =============\r\n  useEffect(() => {\r\n    const socket = socketInstance();\r\n    if (!socket || !chat_id) return;\r\n\r\n    const timeout = setTimeout(() => {\r\n      const payload = { chat_id, typing: false };\r\n\r\n      socket.emit(\"typing\", payload); // send to server\r\n      // dispatch(updateTypingState(payload)); // update Redux\r\n    }, 500);\r\n\r\n    return () => clearTimeout(timeout);\r\n  }, [text, chat_id, dispatch]);\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === \"Enter\") {\r\n      e.preventDefault();\r\n      if (text.trim() || mediaFiles.length > 0) {\r\n        handleSend(); // âœ… Will send media or text\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  const handleEmojiSelect = (emoji: string) => {\r\n    setText((prev) => prev + emoji);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {PeerUserData && (\r\n        <div className=\"relative border-[#B0B0B0] px-4 py-3\">\r\n          {/* Media Preview */}\r\n          {mediaFiles.length > 0 && (\r\n            <div className=\"w-full overflow-x-auto mb-3\">\r\n              <div className=\"flex gap-3 w-max\">\r\n                {mediaFiles.map((file, idx) => {\r\n                  const isImage = file.type.startsWith(\"image/\");\r\n                  const isVideo = file.type.startsWith(\"video/\");\r\n                  // const isDoc = !isImage && !isVideo;\r\n\r\n                  return (\r\n                    <div key={idx} className=\"relative\">\r\n                      {/* Preview */}\r\n                      {isImage || isVideo ? (\r\n                        <div className=\"relative w-52 h-40 p-2 rounded-lg bg-main-green/[0.2] overflow-hidden flex items-center justify-center\">\r\n                          {isImage ? (\r\n                            <Image\r\n                              src={URL.createObjectURL(file)}\r\n                              alt=\"preview\"\r\n                              className=\"object-cover w-full h-full\"\r\n                              width={160}\r\n                              height={100}\r\n                            />\r\n                          ) : (\r\n                            <video\r\n                              src={URL.createObjectURL(file)}\r\n                              className=\"w-full h-full object-cover\"\r\n                              autoPlay\r\n                              muted\r\n                              loop\r\n                            />\r\n                          )}\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"w-full max-w-96 rounded-[9px]\">\r\n                          <div className=\"flex items-center justify-between gap-2 rounded-[7px] p-4 px-6 text-sm background-opacityGradient\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                              <Image\r\n                                className=\"h-10 w-10 object-cover\"\r\n                                src=\"/chat/pdf_icons.png\"\r\n                                alt=\"\"\r\n                                width={100}\r\n                                height={100}\r\n                              />\r\n                              <div className=\"w-full text-dark line-clamp-2 max-w-60 text-xs overflow-hidden\">\r\n                                {file.name\r\n                                  ?.split(\"/\")\r\n                                  .pop()\r\n                                  ?.split(\"-\")\r\n                                  .slice(1)\r\n                                  .join(\"-\") || \"\"}\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n\r\n                      {/* Remove button - works for ALL file types */}\r\n                      <button\r\n                        onClick={() =>\r\n                          setMediaFiles((prev) =>\r\n                            prev.filter((_, i) => i !== idx)\r\n                          )\r\n                        }\r\n                        className=\"absolute -top-1 -right-1 bg-primary text-dark rounded-full w-6 h-6 flex items-center justify-center text-xs cursor-pointer\"\r\n                      >\r\n                        âœ•\r\n                      </button>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"flex w-full gap-3\">\r\n            <div className=\"flex w-full items-center gap-2 border border-[#B0B0B0] rounded-lg px-2 py-1\">\r\n              <EmojiPickerComponent onEmojiSelect={handleEmojiSelect} />\r\n\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Type Message\"\r\n                value={text}\r\n                onChange={(e) => {\r\n                  setText(e.target.value);\r\n                  handleTyping();\r\n                }}\r\n                tabIndex={0}\r\n                onKeyDown={handleKeyDown}\r\n                className=\"flex-1 px-3 py-2 text-sm focus:outline-none text-dark placeholder:text-gray bg-transparent\"\r\n              />\r\n\r\n              <MediaUploadInput\r\n                setMediaFiles={setMediaFiles}\r\n                setMediaType={setMediaType}\r\n                setThumbnail={setThumbnail}\r\n                setMessageType={setMessageType}\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              className=\"px-4 py-2 text-sm text-primary rounded-xl bg-main-green\"\r\n              onClick={handleSend}\r\n            >\r\n              {isSending ? (<>\r\n               <ClipLoader color=\"#FFFFFF\" size={15} loading={isSending}/>\r\n              </>) : (<>\r\n              <Image src=\"/chat/send.png\" width={25} height={25} alt=\"send\" />\r\n              \r\n               </>)}\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default SendMessageInput;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2115, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Downloads/TIKTOK%20%282%29/TIKTOK/reel-boost-website/src/app/message/MessageLayout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport AllChatUsers from \"./AllChatUsers\";\r\nimport ChatHeader from \"./ChatHeader\";\r\nimport AllMessages from \"./AllMessages\";\r\nimport SendMessageInput from \"./SendMessageInput\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nfunction MessageLayout() {\r\n  const [showMessages, setShowMessages] = useState(false);\r\n  const router = useRouter();\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto h-screen\">\r\n      {/* Large screens â†’ grid */}\r\n      <div className=\"hidden sm:grid sm:grid-cols-[30%_70%] md:grid-cols-[38%_62%] xl:grid-cols-[30%_70%] h-full\">\r\n        {/* Left panel: Chat users */}\r\n        <div className=\"border-r bg-primary sticky top-0 border-l h-full\">\r\n          <AllChatUsers onUserClick={() => setShowMessages(true)} />\r\n        </div>\r\n\r\n        {/* Right panel: Chat content */}\r\n        <div className=\"flex flex-col h-full bg-primary relative\">\r\n          <div className=\"sticky top-0 bg-primary z-10\">\r\n            <ChatHeader />\r\n          </div>\r\n          <div className=\"flex-1 overflow-y-auto border-r\">\r\n            <AllMessages />\r\n          </div>\r\n          <div className=\"sticky sm:bottom-0 bottom-10 bg-primary z-10\">\r\n            <SendMessageInput />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Small screens â†’ toggle between list and chat */}\r\n      {/* Small screens â†’ toggle between list and chat */}\r\n      <div className=\"sm:hidden h-full\">\r\n        {!showMessages ? (\r\n          <AllChatUsers onUserClick={() => setShowMessages(true)} />\r\n        ) : (\r\n          <div className=\"flex flex-col h-full bg-primary relative\">\r\n            <div className=\"sticky top-0 bg-primary z-10\">\r\n              {/* Back button inside ChatHeader for mobile */}\r\n              <ChatHeader onBack={() => setShowMessages(false)} />\r\n            </div>\r\n            <div className=\"flex-1 overflow-y-auto border-r\">\r\n              <AllMessages />\r\n            </div>\r\n            <div className=\"sticky bottom-0 bg-primary z-10\">\r\n              <SendMessageInput />\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MessageLayout;\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAPA;;;;;;;;AASA,SAAS;IACP,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,uRAAQ,EAAC;IACjD,MAAM,SAAS,IAAA,qNAAS;IAExB,qBACE,oTAAC;QAAI,WAAU;;0BAEb,oTAAC;gBAAI,WAAU;;kCAEb,oTAAC;wBAAI,WAAU;kCACb,cAAA,oTAAC,uNAAY;4BAAC,aAAa,IAAM,gBAAgB;;;;;;;;;;;kCAInD,oTAAC;wBAAI,WAAU;;0CACb,oTAAC;gCAAI,WAAU;0CACb,cAAA,oTAAC,qNAAU;;;;;;;;;;0CAEb,oTAAC;gCAAI,WAAU;0CACb,cAAA,oTAAC,sNAAW;;;;;;;;;;0CAEd,oTAAC;gCAAI,WAAU;0CACb,cAAA,oTAAC,2NAAgB;;;;;;;;;;;;;;;;;;;;;;0BAOvB,oTAAC;gBAAI,WAAU;0BACZ,CAAC,6BACA,oTAAC,uNAAY;oBAAC,aAAa,IAAM,gBAAgB;;;;;yCAEjD,oTAAC;oBAAI,WAAU;;sCACb,oTAAC;4BAAI,WAAU;sCAEb,cAAA,oTAAC,qNAAU;gCAAC,QAAQ,IAAM,gBAAgB;;;;;;;;;;;sCAE5C,oTAAC;4BAAI,WAAU;sCACb,cAAA,oTAAC,sNAAW;;;;;;;;;;sCAEd,oTAAC;4BAAI,WAAU;sCACb,cAAA,oTAAC,2NAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO/B;uCAEe","debugId":null}}]
}