{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Desktop/TIKTOK/reel-boost-website/src/app/store/api/LiveReels.tsx"],"sourcesContent":["\r\nimport { LiveList } from \"@/app/types/LiveReels\";\r\nimport useApiPost from \"@/app/hooks/postData\";\r\n\r\n// custom fetch function for live reels\r\nexport const useLiveApi = () => {\r\n  const { postData } = useApiPost();\r\n\r\n  const fetchLive = async (page: number): Promise<LiveList> => {\r\n    const payload = {\r\n      social_type: \"reel\",\r\n      page,\r\n    };\r\n    return await postData(\"/live/live-list\", payload);\r\n  };\r\n\r\n  return { fetchLive };\r\n};\r\n"],"names":[],"mappings":";;;;AAEA;;AAGO,MAAM,aAAa;IACxB,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,4LAAU;IAE/B,MAAM,YAAY,OAAO;QACvB,MAAM,UAAU;YACd,aAAa;YACb;QACF;QACA,OAAO,MAAM,SAAS,mBAAmB;IAC3C;IAEA,OAAO;QAAE;IAAU;AACrB","debugId":null}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Renz-Lunci/Desktop/TIKTOK/reel-boost-website/src/app/live/Live.tsx"],"sourcesContent":["\"use client\";\r\nimport Image from \"next/image\";\r\nimport React from \"react\";\r\nimport { AiOutlineEye } from \"react-icons/ai\";\r\nimport { useInfiniteQuery } from \"@tanstack/react-query\";\r\nimport { useLiveApi } from \"../store/api/LiveReels\";\r\nimport { LiveList, LiveRecord } from \"../types/LiveReels\";\r\nimport VideoPlayer from \"../components/VideoPlayer\";\r\nimport { useAppDispatch } from \"../utils/hooks\";\r\nimport { showModal } from \"../store/Slice/ModalsSlice\";\r\nimport { setSelectedLive, setLiveData } from \"../store/Slice/LiveSlice\";\r\n\r\nfunction Live() {\r\n  const dispatch = useAppDispatch();\r\n  const { fetchLive } = useLiveApi();\r\n\r\n  const { data, fetchNextPage, hasNextPage, isFetchingNextPage, isLoading } =\r\n    useInfiniteQuery<LiveList, Error>({\r\n      queryKey: [\"liveReels\"],\r\n      queryFn: ({ pageParam }) => fetchLive(pageParam as number),\r\n      getNextPageParam: (lastPage) => {\r\n        const currentPage = lastPage.data.Pagination.current_page;\r\n        const totalPages = lastPage.data.Pagination.total_pages;\r\n        return currentPage < totalPages ? currentPage + 1 : undefined;\r\n      },\r\n      initialPageParam: 1, // âœ… required in v5\r\n    });\r\n\r\n  // flatten pages\r\n  const live: LiveRecord[] =\r\n    data?.pages.flatMap((page) => page.data.Records) || [];\r\n\r\n  // infinite scroll\r\n  React.useEffect(() => {\r\n    const handleScroll = () => {\r\n      const bottom =\r\n        window.innerHeight + window.scrollY >= document.body.offsetHeight - 200;\r\n      if (bottom && hasNextPage && !isFetchingNextPage) {\r\n        fetchNextPage();\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => window.removeEventListener(\"scroll\", handleScroll);\r\n  }, [fetchNextPage, hasNextPage, isFetchingNextPage]);\r\n\r\n  const ShimmerCard = () => (\r\n    <div className=\"animate-pulse bg-gray-300 h-[250px] w-full rounded-lg\" />\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <h2 className=\"px-4 text-xl text-dark font-semibold 2xl:pt-8 pt-3\">\r\n        Live\r\n      </h2>\r\n\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-4 p-4\">\r\n        {isLoading ? (\r\n          // Render 8 shimmer cards\r\n          Array.from({ length: 8 }).map((_, idx) => <ShimmerCard key={idx} />)\r\n        ) : live.length === 0 ? (\r\n          <div className=\"flex flex-col gap-3 justify-center items-center sm:py-56 py-36 w-full col-span-full\">\r\n            <Image\r\n              src=\"/ReelBoost/NoLive.png\"\r\n              alt=\"No live available\"\r\n              className=\"object-contain\"\r\n              height={80}\r\n              width={80}\r\n            />\r\n            <p className=\"text-sm font-semibold text-dark\">No Live</p>\r\n          </div>\r\n        ) : (\r\n          live.map((item, idx) => (\r\n            <div\r\n              key={idx}\r\n              className=\"relative rounded-lg overflow-hidden h-[250px] bg-dark\"\r\n            >\r\n              <div\r\n                className=\"cursor-pointer\"\r\n                onClick={() => {\r\n                  dispatch(setSelectedLive(item));\r\n                  dispatch(\r\n                    setLiveData({\r\n                      socket_room_id: item.socket_room_id,\r\n                      user_id: item.Live_hosts[0].user_id,\r\n                    })\r\n                  );\r\n                  dispatch(showModal(\"LivePopup\"));\r\n                }}\r\n              >\r\n                <VideoPlayer\r\n                  src={item.Live_hosts[0].peer_id}\r\n                  autoPlay\r\n                  muted\r\n                  controls={false}\r\n                />\r\n              </div>\r\n\r\n              {/* Profile Info */}\r\n              <div className=\"flex gap-1 items-center absolute bottom-3 left-3 z-20\">\r\n                <div className=\"w-8 h-8 rounded-full overflow-hidden shadow-md\">\r\n                  <Image\r\n                    src={item.Live_hosts[0]?.User.profile_pic}\r\n                    alt=\"Profile\"\r\n                    width={32}\r\n                    height={32}\r\n                    className=\"object-cover w-full h-full\"\r\n                  />\r\n                </div>\r\n                <p className=\"text-sm font-semibold text-primary px-2 py-0.5 rounded-lg\">\r\n                  {item.Live_hosts[0]?.User.user_name}\r\n                </p>\r\n              </div>\r\n\r\n              {/* Likes + Views */}\r\n              <div className=\"flex gap-2 rounded-l-md py-1 px-2 absolute top-2 right-0 bg-dark/70 z-20\">\r\n                <div className=\"flex gap-1 items-center\">\r\n                  <Image\r\n                    src=\"/SidebarIcons/heart.png\"\r\n                    alt=\"heart\"\r\n                    width={12}\r\n                    height={12}\r\n                  />\r\n                  <p className=\"font-medium text-primary text-[10px]\">\r\n                    {item.likes}\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex gap-1 items-center\">\r\n                  <AiOutlineEye className=\"w-4 h-4\" />\r\n                  <p className=\"font-medium text-primary text-[10px]\">\r\n                    {item.total_viewers}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Live Badge */}\r\n              <div className=\"bg-red absolute top-2 left-2 py-1 px-4 text-primary font-medium text-[10px] rounded-md z-20\">\r\n                Live\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n\r\n      {/* Optional bottom loader when fetching more */}\r\n      {isFetchingNextPage && (\r\n        <div className=\"text-center py-4 text-gray-500 text-sm\">\r\n          Loading more...\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Live;\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAVA;;;;;;;;;;;AAYA,SAAS;IACP,MAAM,WAAW,IAAA,gMAAc;IAC/B,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,uMAAU;IAEhC,MAAM,EAAE,IAAI,EAAE,aAAa,EAAE,WAAW,EAAE,kBAAkB,EAAE,SAAS,EAAE,GACvE,IAAA,wPAAgB,EAAkB;QAChC,UAAU;YAAC;SAAY;QACvB,SAAS,CAAC,EAAE,SAAS,EAAE,GAAK,UAAU;QACtC,kBAAkB,CAAC;YACjB,MAAM,cAAc,SAAS,IAAI,CAAC,UAAU,CAAC,YAAY;YACzD,MAAM,aAAa,SAAS,IAAI,CAAC,UAAU,CAAC,WAAW;YACvD,OAAO,cAAc,aAAa,cAAc,IAAI;QACtD;QACA,kBAAkB;IACpB;IAEF,gBAAgB;IAChB,MAAM,OACJ,MAAM,MAAM,QAAQ,CAAC,OAAS,KAAK,IAAI,CAAC,OAAO,KAAK,EAAE;IAExD,kBAAkB;IAClB,iQAAK,CAAC,SAAS,CAAC;QACd,MAAM,eAAe;YACnB,MAAM,SACJ,OAAO,WAAW,GAAG,OAAO,OAAO,IAAI,SAAS,IAAI,CAAC,YAAY,GAAG;YACtE,IAAI,UAAU,eAAe,CAAC,oBAAoB;gBAChD;YACF;QACF;QAEA,OAAO,gBAAgB,CAAC,UAAU;QAClC,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACpD,GAAG;QAAC;QAAe;QAAa;KAAmB;IAEnD,MAAM,cAAc,kBAClB,+RAAC;YAAI,WAAU;;;;;;IAGjB,qBACE,+RAAC;;0BACC,+RAAC;gBAAG,WAAU;0BAAqD;;;;;;0BAInE,+RAAC;gBAAI,WAAU;0BACZ,YACC,yBAAyB;gBACzB,MAAM,IAAI,CAAC;oBAAE,QAAQ;gBAAE,GAAG,GAAG,CAAC,CAAC,GAAG,oBAAQ,+RAAC,iBAAiB;;;;gCAC1D,KAAK,MAAM,KAAK,kBAClB,+RAAC;oBAAI,WAAU;;sCACb,+RAAC,yLAAK;4BACJ,KAAI;4BACJ,KAAI;4BACJ,WAAU;4BACV,QAAQ;4BACR,OAAO;;;;;;sCAET,+RAAC;4BAAE,WAAU;sCAAkC;;;;;;;;;;;2BAGjD,KAAK,GAAG,CAAC,CAAC,MAAM,oBACd,+RAAC;wBAEC,WAAU;;0CAEV,+RAAC;gCACC,WAAU;gCACV,SAAS;oCACP,SAAS,oNAAgB;oCACzB,SACE,gNAAY;wCACV,gBAAgB,KAAK,cAAc;wCACnC,SAAS,KAAK,UAAU,CAAC,EAAE,CAAC,OAAO;oCACrC;oCAEF,SAAS,gNAAU;gCACrB;0CAEA,cAAA,+RAAC,oMAAW;oCACV,KAAK,KAAK,UAAU,CAAC,EAAE,CAAC,OAAO;oCAC/B,QAAQ;oCACR,KAAK;oCACL,UAAU;;;;;;;;;;;0CAKd,+RAAC;gCAAI,WAAU;;kDACb,+RAAC;wCAAI,WAAU;kDACb,cAAA,+RAAC,yLAAK;4CACJ,KAAK,KAAK,UAAU,CAAC,EAAE,EAAE,KAAK;4CAC9B,KAAI;4CACJ,OAAO;4CACP,QAAQ;4CACR,WAAU;;;;;;;;;;;kDAGd,+RAAC;wCAAE,WAAU;kDACV,KAAK,UAAU,CAAC,EAAE,EAAE,KAAK;;;;;;;;;;;;0CAK9B,+RAAC;gCAAI,WAAU;;kDACb,+RAAC;wCAAI,WAAU;;0DACb,+RAAC,yLAAK;gDACJ,KAAI;gDACJ,KAAI;gDACJ,OAAO;gDACP,QAAQ;;;;;;0DAEV,+RAAC;gDAAE,WAAU;0DACV,KAAK,KAAK;;;;;;;;;;;;kDAGf,+RAAC;wCAAI,WAAU;;0DACb,+RAAC,+MAAY;gDAAC,WAAU;;;;;;0DACxB,+RAAC;gDAAE,WAAU;0DACV,KAAK,aAAa;;;;;;;;;;;;;;;;;;0CAMzB,+RAAC;gCAAI,WAAU;0CAA8F;;;;;;;uBA9DxG;;;;;;;;;;YAuEZ,oCACC,+RAAC;gBAAI,WAAU;0BAAyC;;;;;;;;;;;;AAMhE;uCAEe","debugId":null}}]
}